<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <title>Signup</title>
    </head>
    <body class="bg-secondary">
        
        <!--  col-4 p-3 needs-validation bg-light rounded -->
        <form class="position-absolute top-50 start-50 translate-middle col-3 p-3 needs-validation bg-light rounded" novalidate>
            <!-- <img class="mx-auto d-flex" src="./image/tiziu.png"> -->

            <!-- border-bottom -->
            <div class="d-flex border-bottom mb-3">
                <h4>
                    <b>Entre no Tzeet agora mesmo</b>
                </h4>
                <!-- <a href="login.html" class="btn-close"></a> -->
                <a class="ms-auto" href="login.html">
                    <button type="button" class="btn-close" id="closeBtn" aria-label="Close"></button>
                </a>
            </div>

            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="floatingInput" pattern="\S+" placeholder="Nome" required>
                <label for="floatingInput">Nome</label>
                <div class="invalid-feedback">
                    Por favor, informe um nome de usuário.
                </div>
            </div>

            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="floatingInput" pattern="^(\w|\.)+@\w+(\.\w+)+$" placeholder="name@example.com" required>
                <label for="floatingInput">Email</label>
                <div class="invalid-feedback">
                    Informe um email válido.
                </div>
            </div>

            <div class="form-floating mb-3">
                <input type="password" class="form-control" id="floatingPassword1" pattern="\S{6,}" placeholder="Password" required>
                <label for="floatingPassword1">Senha</label>
                <div class="invalid-feedback" id="passFeedback1">
                    A senha é obrigatória e deve ter pelo menos 6 caracteres.
                </div>
            </div>

            <div class="form-floating mb-3">
                <input type="password" class="form-control" id="floatingPassword2" pattern="\S{6,}" placeholder="Password" required>
                <label for="floatingPassword2">Confirmação da senha</label>
                <div class="invalid-feedback" id="passFeedback2">
                    A senha é obrigatória e deve ter pelo menos 6 caracteres.
                </div>
            </div>

            <div class="d-block">
                <h5>
                    <b>Data de nascimento</b>
                </h5>
                <span>
                    Isso não será exibido publicamente. Confirme sua própria idade, mesmo se esta conta for de empresa, de um animal de estimação ou outros.
                </span>
            </div>
            <div class="mb-3 d-flex" id="nascimento">
                <div class="form-floating w-75">
                    <select class="form-select" id="mes" aria-label="Floating label select example" required>
                        <option selected></option>
                        <option value="Janeiro">Janeiro</option>
                        <option value="Fevereiro">Fevereiro</option>
                        <option value="Março">Março</option>
                        <option value="Abril">Abril</option>
                        <option value="Maio">Maio</option>
                        <option value="Junho">Junho</option>
                        <option value="Julho">Julho</option>
                        <option value="Agosto">Agosto</option>
                        <option value="Setembro">Setembro</option>
                        <option value="Outubro">Outubro</option>
                        <option value="Novembro">Novembro</option>
                        <option value="Dezembro">Dezembro</option>
                    </select>
                    <label for="mes">Mês</label>
                    <div class="invalid-feedback">
                        Campo obrigatório.
                    </div>
                </div>

                <div class="form-floating w-50 mx-2">
                    <select class="form-select" id="dia" aria-label="Floating label select example" required>
                      <option selected></option>
                    </select>
                    <label for="dia">Dia</label>
                    <div class="invalid-feedback">
                        Campo obrigatório.
                    </div>
                </div>

                <div class="form-floating w-50">
                    <select class="form-select" id="ano" aria-label="Floating label select example" required>
                      <option selected></option>
                      <!-- <option value="1">0000</option> -->
                    </select>
                    <label for="floatingSelect2">Ano</label>
                    <div class="invalid-feedback">
                        Campo obrigatório.
                    </div>
                </div>
            </div>

            <div class="form-floating">
                <!-- <div class="form-check form-check-reverse">
                    <input class="form-check-input" type="checkbox" value="" id="reverseCheck1">
                    <label class="form-check-label" for="reverseCheck1">
                      Reverse checkbox
                    </label>
                </div> -->
                  
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck">
                    <label class="form-check-label" for="invalidCheck">
                        Receba e-mails sobre sua atividade no Twitter e recomendações.
                    </label>
                </div>
            </div>

            <div class="form-floating mb-3">
                <span class="d-block">Você concorda com nossos Termos, com a Política de Privacidade e com o Uso de Cookies?</span class="d-block">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                    <label class="form-check-label" for="inlineRadio1">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                    <label class="form-check-label" for="inlineRadio2">Não</label>
                </div>
                  
                <!-- <div class="d-flex">
                    <div class="form-check">
                        <input type="radio" class="form-check-input" id="validationFormCheck2" name="radio-stacked">
                        <label class="form-check-label" for="validationFormCheck2">Sim</label>
                    </div>
                    <div class="form-check ms-2">
                        <input type="radio" class="form-check-input" id="validationFormCheck3" name="radio-stacked">
                        <label class="form-check-label" for="validationFormCheck3">Não</label>
                        <div class="invalid-feedback">More example invalid feedback text</div>
                    </div>
                </div> -->
            </div>
            

            <div class="border-top">
                <div class="mt-3">
                    <button class="btn btn-primary d-block w-100 rounded-pill" type="submit" disabled>Se inscrever</button>
                </div>
            </div>
        </form>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        
        <script>
            window.addEventListener('load', () => {
                const fullYear = new Date().getFullYear();

                const calendario = {
                    "Janeiro": 31,
                    "Fevereiro": 29,
                    "Março": 31,
                    "Abril": 30,
                    "Maio": 31,
                    "Junho": 30,
                    "Julho": 31,
                    "Agosto": 31,
                    "Setembro": 30,
                    "Outubro": 31,
                    "Novembro": 30,
                    "Dezembro": 31
                }
                const mes = document.getElementById("mes");
                const dia = document.getElementById("dia");
                const ano = document.getElementById("ano");
                const form = document.querySelector('.needs-validation');
                const buttom = form.querySelector("button[type=submit]");
                const termoCheck = form.querySelector("#inlineRadio1");
                const password1 = document.getElementById("floatingPassword1");
                const password2 = document.getElementById("floatingPassword2");
                const passFeedback1 = document.getElementById("passFeedback1");
                const passFeedback2 = document.getElementById("passFeedback2");
                const closeBtn = document.getElementById("closeBtn");

                const nascimento = document.getElementById("nascimento");
                
                function bissexto(ano) {
                    if (ano % 4 == 0) {
                        if (ano % 100 == 0) {
                            if (ano % 400 == 0) {
                                return true;
                            } else return false;
                        } else return true;
                    } else return false
                }

                mes.addEventListener("change", (ev) => {
                    if (!ano.value) calendario["Fevereiro"] = 29;
                    else if (bissexto(ano.value)) {
                        calendario["Fevereiro"] = 29;
                    } else calendario["Fevereiro"] = 28;

                    const index = calendario[mes.value];
                    if (!index) return;

                    const oldValue = dia.value;
                    dia.innerHTML = "<option selected></option>";
                    let diasHTML = "";
                    for (let i = 1; i <= index; i++) {
                        diasHTML += `<option value="${i}">${i}</option>`;
                    }
                    dia.innerHTML += diasHTML;

                    if (oldValue && oldValue <= index) {
                        dia.value = oldValue;
                    }
                });

                dia.addEventListener("change", (ev) => {
                    let anoBis = fullYear;
                    const oldValue = ano.value;
                    if (dia.value == 29 && mes.value == "Fevereiro") {
                        if (ano.bissexto === true) return;
                        ano.bissexto = true;
                        while(!bissexto(anoBis)) anoBis--;

                        ano.innerHTML = "<option selected></option>";
                        let anosHTML = "";
                        for (let i = 0; anoBis >= 1900; i++) {
                            anosHTML += `<option value="${anoBis}">${anoBis}</option>`;
                            anoBis -= 4;
                        }
                        ano.innerHTML += anosHTML;

                        if (oldValue && bissexto(oldValue)) {
                            ano.value = oldValue;
                        }
                    } else {
                        ano.bissexto = false;
                        ano.innerHTML = "<option selected></option>";
                        let anosHTML = "";
                        for (; anoBis >= 1900; anoBis--) {
                            anosHTML += `<option value="${anoBis}">${anoBis}</option>`;
                        }
                        ano.innerHTML += anosHTML;
                        ano.value = oldValue;
                    }
                });

                form.reset();
                form.addEventListener('input', () => {
                    form.classList.add('was-validated');
                    let passwordValido = false;

                    if (/\S{6,}/.test(password1.value)) {
                        passFeedback1.innerText = "As palavras-passe não coincidem. Tente novamente.";
                    } else {
                        passFeedback1.innerText = "A senha é obrigatória e deve ter pelo menos 6 caracteres.";
                    }

                    if (/\S{6,}/.test(password2.value)) {
                        passFeedback2.innerText = "As palavras-passe não coincidem. Tente novamente.";
                    } else {
                        passFeedback2.innerText = "A senha é obrigatória e deve ter pelo menos 6 caracteres.";
                    }

                    if (password1.value != password2.value) {
                        password1.classList.add("is-invalid");
                        password2.classList.add("is-invalid");
                    } else {
                        passwordValido = true;
                        password1.classList.remove("is-invalid");
                        password2.classList.remove("is-invalid");
                    }

                    buttom.disabled = !(form.checkValidity() && termoCheck.checked && passwordValido);
                });



                form.addEventListener('submit', function (event) {
                    event.preventDefault();
                    event.stopPropagation();

                    form.classList.add('was-validated');
                }, false);
            })
        </script>
    </body>
</html>